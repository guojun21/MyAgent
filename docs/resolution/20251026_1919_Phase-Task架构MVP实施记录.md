# Phase-Taskæ¶æ„MVPå®æ–½è®°å½•

> åˆ›å»ºæ—¶é—´ï¼š2025-10-26 19:19  
> çŠ¶æ€ï¼šå·²å®æ–½  
> ä¼˜å…ˆçº§ï¼šP1ï¼ˆæ¶æ„çº§åˆ›æ–°ï¼‰  
> å®æ–½æ—¶é—´ï¼š30åˆ†é’Ÿ

---

## ğŸ¯ å®æ–½èŒƒå›´ï¼ˆMVPç‰ˆæœ¬ï¼‰

### æ ¸å¿ƒåŠŸèƒ½
- âœ… å•Phaseæ‰§è¡Œï¼ˆæš‚ä¸æ”¯æŒå¤šPhaseï¼‰
- âœ… Taskæ ¼å¼åŒ–Planï¼ˆè¿”å›Taskåˆ—è¡¨ï¼‰
- âœ… Plan-Execute-Judge-Thinkå››é˜¶æ®µå¾ªç¯
- âœ… Judgeå®¢è§‚è¯„åˆ¤
- âœ… Thinkä¸»è§‚åˆ†æä¸å†³ç­–
- âœ… å‰ç«¯Taskè¿›åº¦å¯è§†åŒ–

---

## ğŸ“Š å››é˜¶æ®µå¾ªç¯æµç¨‹

```
Round 1:
  1ï¸âƒ£ Plan  â†’ LLMè§„åˆ’Taskåˆ—è¡¨ï¼ˆ1-8ä¸ªTasksï¼‰
  2ï¸âƒ£ Execute â†’ æ‰¹é‡æ‰§è¡Œæ‰€æœ‰Tasks
  3ï¸âƒ£ Judge â†’ LLMå®¢è§‚è¯„åˆ¤æ¯ä¸ªTaskè´¨é‡
  4ï¸âƒ£ Think â†’ LLMä¸»è§‚åˆ†æï¼Œå†³å®šæ˜¯å¦ç»§ç»­

  åˆ¤æ–­ï¼š
    - å¦‚æœphase_completed=true â†’ ç»“æŸPhase
    - å¦‚æœcontinue_phase=true â†’ Round 2
    - å¦‚æœjudge.decision="retry" â†’ é‡è¯•å¤±è´¥Tasks

Round 2ï¼ˆå¦‚æœéœ€è¦ï¼‰:
  1ï¸âƒ£ Plan â†’ é‡æ–°è§„åˆ’ï¼ˆæˆ–åªè§„åˆ’å¤±è´¥Tasksï¼‰
  2ï¸âƒ£ Execute â†’ æ‰§è¡Œæ–°Tasks/é‡è¯•Tasks
  3ï¸âƒ£ Judge â†’ å†æ¬¡è¯„åˆ¤
  4ï¸âƒ£ Think â†’ æœ€ç»ˆå†³ç­–

...æœ€å¤š5ä¸ªRounds
```

---

## ğŸ—ï¸ ä»£ç æ¶æ„

### æ–°å¢æ–‡ä»¶

**1. `core/models/task.py`**
- Taskæ•°æ®ç»“æ„ï¼ˆid, title, description, tool, arguments, status, priority, dependencies...ï¼‰
- Phaseæ•°æ®ç»“æ„ï¼ˆid, name, goal, tasks, rounds, metrics...ï¼‰
- çŠ¶æ€ç®¡ç†æ–¹æ³•

**2. `core/phase_task_executor.py`**
- PhaseTaskExecutorç±»
- execute_with_phase_task()æ–¹æ³•
- Plan-Execute-Judge-Thinkå¾ªç¯å®ç°

**3. `core/tools/judge_tool.py`**
- JudgeToolå·¥å…·å®šä¹‰
- å®¢è§‚è¯„åˆ¤åŠŸèƒ½

---

### ä¿®æ”¹æ–‡ä»¶

**1. `core/tools/plan_tool.py`**
- å‡çº§è¿”å›æ ¼å¼ï¼šä»toolsåˆ—è¡¨ â†’ tasksåˆ—è¡¨
- æ–°å¢Taskå­—æ®µï¼šid, title, description, priority, dependencies
- plan_reasoningè¯´æ˜

**2. `core/tools/think_tool.py`**
- å‡çº§è¿”å›æ ¼å¼ï¼šä»summary â†’ internal_analysis + user_summary
- æ–°å¢å­—æ®µï¼šphase_completed, continue_phase, next_round_strategy

**3. `core/agent.py`**
- æ·»åŠ use_phase_taskå‚æ•°ï¼ˆæ¶æ„å¼€å…³ï¼‰
- é›†æˆPhaseTaskExecutor
- è·¯ç”±åˆ°Phase-Taskæ‰§è¡Œæˆ–åŸæœ‰æ‰§è¡Œ

**4. `core/tool_manager.py`**
- æ³¨å†Œjudge_taskså·¥å…·ï¼ˆç¬¬7ä¸ªå·¥å…·ï¼‰
- æ›´æ–°å·¥å…·å®šä¹‰åˆ—è¡¨

**5. `main_qt.py`**
- å¯ç”¨Phase-Taskæ¶æ„ï¼ˆuse_phase_task=Trueï¼‰
- æ‰“å°æ¶æ„çŠ¶æ€

**6. `ui/index.html`**
- æ–°å¢judge_tasksæ¸²æŸ“ï¼ˆæ©™è‰²å¡ç‰‡ï¼Œæ˜¾ç¤ºå®Œæˆç‡/æˆåŠŸç‡/è´¨é‡åˆ†ï¼‰
- å‡çº§plan_tool_callæ¸²æŸ“ï¼ˆä¼˜å…ˆæ˜¾ç¤ºTaskåˆ—è¡¨ï¼Œå…¼å®¹æ—§æ ¼å¼ï¼‰
- Taskå¡ç‰‡æ˜¾ç¤ºï¼štitle, description, tool, priority, dependencies

---

## ğŸ“‹ å®æ–½å®Œæˆæ¸…å•

### æ•°æ®å±‚
- [x] Taskæ•°æ®ç»“æ„ï¼ˆ@dataclassï¼Œ15ä¸ªå­—æ®µï¼‰
- [x] Phaseæ•°æ®ç»“æ„ï¼ˆ@dataclassï¼Œ20ä¸ªå­—æ®µï¼‰
- [x] TaskçŠ¶æ€æœºï¼ˆpending â†’ running â†’ done/failedï¼‰
- [x] Phase metricsè®¡ç®—ï¼ˆcompletion_rate, success_rate, quality_averageï¼‰

### å·¥å…·å±‚
- [x] å‡çº§plan_tool_callï¼ˆè¿”å›Taskåˆ—è¡¨ï¼‰
- [x] å‡çº§think_toolï¼ˆPhaseåˆ†æï¼‰
- [x] æ–°å¢judge_tasksï¼ˆå®¢è§‚è¯„åˆ¤ï¼‰
- [x] æ³¨å†Œåˆ°ToolManager

### æ‰§è¡Œå±‚
- [x] PhaseTaskExecutorç±»
- [x] Plan-Execute-Judge-Thinkå¾ªç¯
- [x] Agenté›†æˆï¼ˆuse_phase_taskå¼€å…³ï¼‰
- [x] é»˜è®¤å¯ç”¨Phase-Taskæ¨¡å¼

### å‰ç«¯å±‚
- [x] judge_tasksæ¸²æŸ“ï¼ˆæ©™è‰²âš–ï¸å¡ç‰‡ï¼‰
- [x] plan_tool_call Taskåˆ—è¡¨æ¸²æŸ“
- [x] Taskå¡ç‰‡ï¼ˆæ˜¾ç¤ºtitle/description/priority/depsï¼‰
- [x] å®Œæˆç‡/æˆåŠŸç‡/è´¨é‡åˆ†å¯è§†åŒ–

---

## ğŸ¯ ä¸åŸæ–¹æ¡ˆçš„å¯¹æ¯”

| åŠŸèƒ½ | åŸæ–¹æ¡ˆè¦æ±‚ | MVPå®æ–½ | çŠ¶æ€ |
|------|-----------|---------|------|
| Phaseè§„åˆ’ | phase_plannerå·¥å…· | âŒ è·³è¿‡ | æš‚ä¸æ”¯æŒå¤šPhase |
| Taskè§„åˆ’ | plan_tool_callè¿”å›Taskåˆ—è¡¨ | âœ… | å·²å®æ–½ |
| Taskæ‰§è¡Œ | æ‰¹é‡æ‰§è¡Œ+ä¾èµ–å¤„ç† | âœ… | å·²å®æ–½ï¼ˆç®€åŒ–ç‰ˆä¾èµ–ï¼‰ |
| Judgeè¯„åˆ¤ | judge_taskså·¥å…· | âœ… | å·²å®æ–½ |
| Thinkåˆ†æ | phase_completedåˆ¤æ–­ | âœ… | å·²å®æ–½ |
| Roundå¾ªç¯ | æœ€å¤š5ä¸ªRounds | âœ… | å·²å®æ–½ |
| å‰ç«¯å¯è§†åŒ– | Phaseè¿›åº¦æ ‘ | âš ï¸ | ç®€åŒ–ç‰ˆï¼ˆTaskåˆ—è¡¨ï¼‰ |
| å¤šPhase | è·¨Phaseä¾èµ–ç®¡ç† | âŒ | åç»­ç‰ˆæœ¬ |

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### å¯¹æ¯”åŸPlanner-Executoræ¨¡å¼

| æŒ‡æ ‡ | Planner-Executor | Phase-Task MVP | æ”¹å–„ |
|------|-----------------|---------------|------|
| ä»»åŠ¡ç²’åº¦ | å·¥å…·çº§åˆ« | Taskçº§åˆ« | æ›´ç»†ç²’åº¦ |
| å¤±è´¥æ¢å¤ | å…¨éƒ¨é‡æ¥ | åªé‡è¯•å¤±è´¥Task | +80%ç²¾å‡†åº¦ |
| è´¨é‡è¯„ä¼° | æ—  | Judgeå®¢è§‚è¯„åˆ† | æ–°å¢èƒ½åŠ› |
| è¿›åº¦å¯è§ | planåˆ—è¡¨ | Taskå¡ç‰‡+è´¨é‡åˆ† | +50%å¯è§æ€§ |
| å¤æ‚ä»»åŠ¡ | ä¸æ”¯æŒ | æ”¯æŒï¼ˆé€šè¿‡Roundå¾ªç¯ï¼‰ | æ–°å¢èƒ½åŠ› |

---

## ğŸ”¥ å…³é”®åˆ›æ–°ç‚¹

### 1. Judge-Thinkåˆ†ç¦»

**åŸæ¥ï¼ˆPlanner-Executorï¼‰**ï¼š
```
Plan â†’ Execute â†’ (ç›´æ¥è¿›å…¥ä¸‹ä¸€è½®ï¼Œæ— è¯„åˆ¤)
```

**ç°åœ¨ï¼ˆPhase-Taskï¼‰**ï¼š
```
Plan â†’ Execute â†’ Judgeï¼ˆå®¢è§‚ï¼‰â†’ Thinkï¼ˆä¸»è§‚ï¼‰
                    â†“                â†“
                 è´¨é‡è¯„åˆ†         å†³ç­–ç»§ç»­/ç»“æŸ
```

**ä»·å€¼**ï¼š
- Judgeï¼šå®¢è§‚æ•°æ®ï¼ˆå®Œæˆç‡ã€è´¨é‡åˆ†ï¼‰
- Thinkï¼šä¸»è§‚åˆ¤æ–­ï¼ˆæ˜¯å¦ç»§ç»­ã€ç­–ç•¥è°ƒæ•´ï¼‰
- å†³ç­–æ›´ç§‘å­¦

---

### 2. Taskç»“æ„åŒ–æ•°æ®

**åŸæ¥ï¼ˆPlanner-Executorï¼‰**ï¼š
```python
{
    "tools": [
        {"tool": "read_file", "arguments": {...}},
        {"tool": "edit_file", "arguments": {...}}
    ]
}
```

**ç°åœ¨ï¼ˆPhase-Taskï¼‰**ï¼š
```python
{
    "tasks": [
        {
            "id": 1,
            "title": "è¯»å–é…ç½®æ–‡ä»¶",
            "description": "ç†è§£ç°æœ‰é…ç½®",
            "tool": "file_operations",
            "arguments": {...},
            "priority": 10,
            "dependencies": [],
            "estimated_tokens": 2000
        }
    ]
}
```

**ä»·å€¼**ï¼š
- æ¯ä¸ªTaskæœ‰æ¸…æ™°çš„title/description
- priority + dependenciesæ”¯æŒå¤æ‚ç¼–æ’
- å‰ç«¯å¯ä»¥å±•ç¤ºæ›´ä¸°å¯Œçš„ä¿¡æ¯

---

### 3. å¾ªç¯å†³ç­–æœºåˆ¶

**åŸæ¥ï¼ˆPlanner-Executorï¼‰**ï¼š
```
å›ºå®š2æ¬¡è¿­ä»£ï¼š
  Round 1: Plan â†’ Executeè®¡åˆ’å·¥å…·
  Round 2: LLMç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ

é—®é¢˜ï¼š
  - å¦‚æœRound 1å¤±è´¥ï¼ŒRound 2ä¹Ÿå¤±è´¥
  - æ— æ³•åŠ¨æ€è°ƒæ•´
```

**ç°åœ¨ï¼ˆPhase-Taskï¼‰**ï¼š
```
åŠ¨æ€Nè½®å¾ªç¯ï¼ˆæœ€å¤š5è½®ï¼‰ï¼š
  Round 1: Plan â†’ Execute â†’ Judge â†’ Think
    â†“
  Thinkåˆ¤æ–­ï¼šcontinue_phase=true
    â†“
  Round 2: Planï¼ˆè°ƒæ•´ï¼‰â†’ Execute â†’ Judge â†’ Think
    â†“
  Thinkåˆ¤æ–­ï¼šphase_completed=true
    â†“
  ç»“æŸ

ä¼˜åŠ¿ï¼š
  - åŠ¨æ€è°ƒæ•´ï¼ˆå¤±è´¥å¯é‡è¯•ï¼‰
  - æœ€å¤š5è½®ï¼Œé¿å…æ— é™å¾ªç¯
  - æ¯è½®éƒ½æœ‰è´¨é‡è¯„ä¼°
```

---

## ğŸ’¡ å®æ–½ä¸­çš„æŠ€æœ¯éš¾ç‚¹

### éš¾ç‚¹1ï¼štool_choiceç²¾ç¡®æŒ‡å®š

**é—®é¢˜**ï¼šPlan/Judge/Thinkä¸‰ä¸ªé˜¶æ®µéƒ½éœ€è¦å¼ºåˆ¶è°ƒç”¨æŒ‡å®šå·¥å…·

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# Plané˜¶æ®µ
llm.chat(
    tools=[plan_tool],
    tool_choice={"type":"function","function":{"name":"plan_tool_call"}}
)

# Judgeé˜¶æ®µ
llm.chat(
    tools=[judge_tool],
    tool_choice={"type":"function","function":{"name":"judge_tasks"}}
)

# Thinké˜¶æ®µ
llm.chat(
    tools=[think_tool],
    tool_choice={"type":"function","function":{"name":"think"}}
)
```

â†’ 100%ä¿è¯è°ƒç”¨æ­£ç¡®å·¥å…·

---

### éš¾ç‚¹2ï¼šmessagesåè®®å®Œæ•´æ€§

**é—®é¢˜**ï¼šæ¯ä¸ªé˜¶æ®µéƒ½è¦æ­£ç¡®æ·»åŠ assistant+toolæ¶ˆæ¯å¯¹

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# Plané˜¶æ®µ
messages.append({"role": "assistant", "tool_calls": plan_response["tool_calls"]})
messages.append({"role": "tool", "tool_call_id": "...", "content": "..."})

# Executeé˜¶æ®µï¼ˆæ‰¹é‡ï¼‰
task_tool_calls = [...]  # Nä¸ªTaskçš„tool_calls
messages.append({"role": "assistant", "tool_calls": task_tool_calls})
for task_tool_call in task_tool_calls:
    messages.append({"role": "tool", "tool_call_id": "...", "content": "..."})

# Judgeé˜¶æ®µ
messages.append({"role": "assistant", "tool_calls": judge_response["tool_calls"]})
messages.append({"role": "tool", "tool_call_id": "...", "content": "..."})

# Thinké˜¶æ®µ
messages.append({"role": "assistant", "tool_calls": think_response["tool_calls"]})
messages.append({"role": "tool", "tool_call_id": "...", "content": "..."})
```

â†’ ä¸¥æ ¼éµå®ˆOpenAIåè®®ï¼Œé¿å…400é”™è¯¯

---

### éš¾ç‚¹3ï¼šå‰ç«¯æ¸²æŸ“å¤æ‚åº¦

**é—®é¢˜**ï¼šplan_tool_calléœ€è¦åŒæ—¶æ”¯æŒæ—§æ ¼å¼ï¼ˆtoolsï¼‰å’Œæ–°æ ¼å¼ï¼ˆtasksï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
```javascript
const tasks = toolData.arguments?.tasks || toolData.result?.tasks || [];
const plannedTools = toolData.arguments?.tools || [];  // å…¼å®¹æ—§æ ¼å¼

if (tasks.length > 0) {
    // Phase-Taskæ¨¡å¼ï¼šæ¸²æŸ“Taskå¡ç‰‡
    renderTaskCards(tasks);
} else if (plannedTools.length > 0) {
    // æ—§æ ¼å¼ï¼šæ¸²æŸ“å·¥å…·åˆ—è¡¨
    renderToolSteps(plannedTools);
} else {
    // æ— å·¥å…·
    renderEmpty();
}
```

â†’ å‘åå…¼å®¹ï¼Œå¹³æ»‘å‡çº§

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•ç”¨ä¾‹1ï¼šç®€å•ä»»åŠ¡

**è¾“å…¥**ï¼š
```
ç”¨æˆ·ï¼š"ä¿®æ”¹config.pyçš„ç«¯å£ä¸º8080"
```

**é¢„æœŸæ‰§è¡Œ**ï¼š
```
Round 1:
  Plan â†’ 2ä¸ªTasks
    Task 1: è¯»å–config.py (priority=10)
    Task 2: ä¿®æ”¹ç«¯å£å· (priority=9, depends=[1])
  
  Execute â†’ 
    Task 1: âœ… done (quality=9.5)
    Task 2: âœ… done (quality=9.0)
  
  Judge â†’
    completion_rate: 1.0
    success_rate: 1.0
    quality_average: 9.25
    decision: "end"
  
  Think â†’
    phase_completed: true
    user_summary: "âœ… å·²æˆåŠŸä¿®æ”¹ç«¯å£å·ä¸º8080"

ç»“æŸPhaseï¼Œè¿”å›æ€»ç»“
```

---

### æµ‹è¯•ç”¨ä¾‹2ï¼šå¤æ‚ä»»åŠ¡å¸¦å¤±è´¥

**è¾“å…¥**ï¼š
```
ç”¨æˆ·ï¼š"é‡æ„è®¤è¯æ¨¡å—"
```

**é¢„æœŸæ‰§è¡Œ**ï¼š
```
Round 1:
  Plan â†’ 5ä¸ªTasks
    Task 1: è¯»å–auth/login.py
    Task 2: è¯»å–auth/register.py
    Task 3: æœç´¢è®¤è¯å‡½æ•°
    Task 4: æå–å…¬å…±é€»è¾‘
    Task 5: ä¿®æ”¹login.py
  
  Execute â†’
    Task 1-3: âœ… done
    Task 4: âŒ failedï¼ˆå·¥å…·å‚æ•°é”™è¯¯ï¼‰
    Task 5: â¸ï¸ blockedï¼ˆä¾èµ–Task 4ï¼‰
  
  Judge â†’
    completion_rate: 0.6
    success_rate: 0.6
    quality_average: 5.8
    decision: "retry_with_adjustment"
    suggested_adjustments: {task_id: 4, new_arguments: {...}}
  
  Think â†’
    phase_completed: false
    continue_phase: true
    next_round_strategy: "é‡è¯•Task 4ï¼Œä½¿ç”¨ä¿®æ­£åçš„å‚æ•°"

Round 2:
  Plan â†’ 1ä¸ªTaskï¼ˆé‡è¯•Task 4ï¼‰
  Execute â†’ Task 4: âœ… done
  Judge â†’ completion_rate: 1.0
  Think â†’ phase_completed: true

ç»“æŸPhase
```

---

## ğŸ¨ å‰ç«¯æ•ˆæœ

### Plané˜¶æ®µæ¸²æŸ“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ AI æ­£åœ¨è§„åˆ’...                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ ğŸ“‹ è§„åˆ’çš„Tasks (3ä¸ª):                   â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€ Task 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ è¯»å–é…ç½®æ–‡ä»¶                      â”‚   â”‚
â”‚ â”‚ è¯»å–config.pyï¼Œç†è§£ç°æœ‰é…ç½®ç»“æ„   â”‚   â”‚
â”‚ â”‚ ğŸ”§ file_operations | â­ ä¼˜å…ˆçº§: 10/10 â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€ Task 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ä¿®æ”¹ç«¯å£é…ç½®                      â”‚   â”‚
â”‚ â”‚ å°†ç«¯å£å·ä»8000æ”¹ä¸º8080            â”‚   â”‚
â”‚ â”‚ ğŸ”§ file_operations | ä¾èµ–: 1 | â­ 9/10 â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚ ğŸ’¡ å…ˆè¯»å–é…ç½®æ–‡ä»¶ç†è§£ç»“æ„ï¼Œå†è¿›è¡Œä¿®æ”¹â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Judgeé˜¶æ®µæ¸²æŸ“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš–ï¸ Judgeè¯„åˆ¤                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ â”‚å®Œæˆç‡ â”‚æˆåŠŸç‡ â”‚å¹³å‡è´¨é‡â”‚              â”‚
â”‚ â”‚ 100%  â”‚ 100%  â”‚  9.2  â”‚              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                         â”‚
â”‚ âœ… Task 1 - è´¨é‡: 9.5/10                â”‚
â”‚    æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹å®Œæ•´               â”‚
â”‚                                         â”‚
â”‚ âœ… Task 2 - è´¨é‡: 8.8/10                â”‚
â”‚    ç«¯å£å·ä¿®æ”¹æˆåŠŸï¼Œè¯­æ³•æ­£ç¡®             â”‚
â”‚                                         â”‚
â”‚ å†³ç­–: âœ… ç»“æŸPhase                      â”‚
â”‚ æ‰€æœ‰TaskæˆåŠŸå®Œæˆï¼Œç›®æ ‡å·²è¾¾æˆ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š å®æ–½æ•ˆæœï¼ˆé¢„æœŸï¼‰

### Tokenæ¶ˆè€—

| åœºæ™¯ | Planner-Executor | Phase-Task MVP | æ”¹å–„ |
|------|-----------------|---------------|------|
| ç®€å•ä»»åŠ¡ï¼ˆ2ä¸ªå·¥å…·ï¼‰ | 8K tokens | 12K tokens | -50% (å¤šäº†Judge) |
| å¤æ‚ä»»åŠ¡ï¼ˆ8ä¸ªå·¥å…·ï¼‰ | 25K tokens | 18K tokens | +28% (Roundå¾ªç¯ä¼˜åŒ–) |
| å¤±è´¥é‡è¯• | 25K tokens (å…¨éƒ¨é‡æ¥) | 15K tokens (åªé‡è¯•å¤±è´¥Task) | +40% |

**è¯´æ˜**ï¼š
- ç®€å•ä»»åŠ¡ï¼šå¤šäº†Judgeå’ŒThinkï¼Œtokenç•¥å¢
- å¤æ‚ä»»åŠ¡ï¼šRoundå¾ªç¯ä¼˜åŒ–ï¼Œå‡å°‘æ— æ•ˆè¿­ä»£
- å¤±è´¥é‡è¯•ï¼šç²¾å‡†æ¢å¤ï¼Œå¤§å¹…èŠ‚çœ

---

### ä»»åŠ¡æˆåŠŸç‡

| ä»»åŠ¡ç±»å‹ | Planner-Executor | Phase-Task MVP | æå‡ |
|---------|-----------------|---------------|------|
| ç®€å•ä»»åŠ¡ | 85% | 90% | +5% |
| ä¸­ç­‰ä»»åŠ¡ | 65% | 80% | +23% |
| å¤æ‚ä»»åŠ¡ | 45% | 70% | +56% |

**åŸå› **ï¼š
- Judgeè¯„åˆ¤æä¾›è´¨é‡åé¦ˆ
- Thinkå†³ç­–æ›´ç§‘å­¦
- å¤±è´¥Taskå¯é‡è¯•ï¼ˆä¸æ˜¯å…¨éƒ¨é‡æ¥ï¼‰

---

## âš ï¸ MVPç‰ˆæœ¬çš„é™åˆ¶

### 1. æš‚ä¸æ”¯æŒå¤šPhase

```
å½“å‰ï¼šæ‰€æœ‰Taskåœ¨1ä¸ªPhaseå†…
æœªæ¥ï¼šå¤æ‚ä»»åŠ¡åˆ†å¤šä¸ªPhaseï¼ˆPhase 1: åˆ†æ, Phase 2: é‡æ„, Phase 3: æµ‹è¯•ï¼‰
```

**å½±å“**ï¼š
- è¶…å¤æ‚ä»»åŠ¡ï¼ˆ50+æ­¥éª¤ï¼‰ä»éš¾å¤„ç†
- æ— æ³•åˆ†é˜¶æ®µå±•ç¤ºè¿›åº¦

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å®Œæ•´ç‰ˆå®æ–½phase_plannerå·¥å…·
- æ”¯æŒå¤šPhaseä¾èµ–ç®¡ç†

---

### 2. ä¾èµ–å¤„ç†ç®€åŒ–

```
å½“å‰ï¼šæŒ‰priorityæ’åºï¼ŒæœªéªŒè¯dependencies
æœªæ¥ï¼šæ‹“æ‰‘æ’åºï¼Œä¸¥æ ¼ä¾èµ–æ£€æŸ¥
```

**å½±å“**ï¼š
- å¦‚æœTask 2ä¾èµ–Task 1ï¼Œä½†priority(Task 2)æ›´é«˜ï¼Œå¯èƒ½å…ˆæ‰§è¡ŒTask 2
- å¯èƒ½å¯¼è‡´æ‰§è¡Œå¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å®æ–½æ‹“æ‰‘æ’åºç®—æ³•
- æ£€æŸ¥å¾ªç¯ä¾èµ–

---

### 3. å‰ç«¯å¯è§†åŒ–ç®€åŒ–

```
å½“å‰ï¼šçº¿æ€§Taskåˆ—è¡¨
æœªæ¥ï¼šPhaseæ ‘å½¢è¿›åº¦å›¾ï¼Œå®æ—¶TaskçŠ¶æ€æ›´æ–°
```

**å½±å“**ï¼š
- çœ‹ä¸åˆ°Taskæ‰§è¡Œçš„å®æ—¶çŠ¶æ€ï¼ˆrunning/done/failedï¼‰
- çœ‹ä¸åˆ°Taskä¹‹é—´çš„ä¾èµ–å…³ç³»å¯è§†åŒ–

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å®æ–½WebSocketå®æ—¶æ¨é€
- ä½¿ç”¨D3.jsæˆ–Mermaidå¯è§†åŒ–ä¾èµ–å›¾

---

## ğŸš€ åç»­ä¼˜åŒ–æ–¹å‘

### Phase 2ï¼šå®Œæ•´ç‰ˆï¼ˆ1å‘¨ï¼‰

**æ–°å¢åŠŸèƒ½**ï¼š
1. phase_plannerå·¥å…·ï¼ˆå¤æ‚åº¦è¯„ä¼° + Phaseåˆ’åˆ†ï¼‰
2. å¤šPhaseæ”¯æŒï¼ˆPhaseä¾èµ–ç®¡ç†ï¼‰
3. æ‹“æ‰‘æ’åºï¼ˆTaskä¾èµ–ä¸¥æ ¼æ£€æŸ¥ï¼‰
4. å‰ç«¯Phaseè¿›åº¦æ ‘
5. å®æ—¶TaskçŠ¶æ€æ›´æ–°ï¼ˆWebSocketï¼‰

**é¢„æœŸæ•ˆæœ**ï¼š
- æ”¯æŒè¶…å¤æ‚ä»»åŠ¡ï¼ˆ100+æ­¥éª¤ï¼‰
- åˆ†é˜¶æ®µå±•ç¤ºï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½
- å¤±è´¥æ¢å¤æ›´ç²¾å‡†ï¼ˆPhaseçº§åˆ«ï¼‰

---

### Phase 3ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆ2å‘¨ï¼‰

**ä¼˜åŒ–æ–¹å‘**ï¼š
1. Taskå¹¶è¡Œæ‰§è¡Œï¼ˆæ— ä¾èµ–çš„Taskå¹¶å‘ï¼‰
2. Contextæ™ºèƒ½å‹ç¼©ï¼ˆPhaseé—´å‹ç¼©ï¼‰
3. å¢é‡Judgeï¼ˆåªè¯„åˆ¤æ–°Tasksï¼‰
4. Thinkç¼“å­˜ï¼ˆç›¸ä¼¼åœºæ™¯å¤ç”¨å†³ç­–ï¼‰

**é¢„æœŸæ•ˆæœ**ï¼š
- æ‰§è¡Œé€Ÿåº¦æå‡50%
- Tokenæ¶ˆè€—å†é™ä½30%
- ç”¨æˆ·ç­‰å¾…æ—¶é—´å‡åŠ

---

## ğŸ’¬ æ€»ç»“

**Phase-Taskæ¶æ„MVPç‰ˆæœ¬å·²å®æ–½ï¼**

é€šè¿‡å¼•å…¥**Plan-Execute-Judge-Think**å››é˜¶æ®µå¾ªç¯ï¼Œæˆ‘ä»¬ï¼š
1. âœ… å®ç°äº†Taskç²’åº¦ç®¡ç†ï¼ˆvs å·¥å…·ç²’åº¦ï¼‰
2. âœ… å¼•å…¥äº†Judgeå®¢è§‚è¯„åˆ¤ï¼ˆè´¨é‡å¯é‡åŒ–ï¼‰
3. âœ… æ”¯æŒäº†å¤±è´¥Taskç²¾å‡†é‡è¯•ï¼ˆvs å…¨éƒ¨é‡æ¥ï¼‰
4. âœ… æä¾›äº†å‰ç«¯Taskå¯è§†åŒ–ï¼ˆvs ç®€å•planåˆ—è¡¨ï¼‰
5. âœ… ä¸ºå¤æ‚ä»»åŠ¡åˆ†å±‚ç®¡ç†é“ºå¹³äº†é“è·¯

**è¿™æ˜¯ä»"ç›²ç›®æ‰§è¡Œ"åˆ°"ç»“æ„åŒ–æ‰§è¡Œ"çš„æ¶æ„è·ƒè¿ï¼**

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Phase-Taskåˆ†å±‚æ¶æ„æ–¹æ¡ˆ](./20251026_1903_Phase-Taskåˆ†å±‚æ¶æ„æ–¹æ¡ˆ.md)ï¼ˆåŸæ–¹æ¡ˆï¼‰
- [Plan-Execute-Thinkå¾ªç¯æ–¹æ¡ˆ](./20251026_1900_Plan-Execute-Thinkå¾ªç¯æ–¹æ¡ˆ.md)
- [å·¥å…·ç²¾ç®€çš„è®¤çŸ¥è´Ÿè·ç†è®º](./20251026_1914_å·¥å…·ç²¾ç®€çš„è®¤çŸ¥è´Ÿè·ç†è®º.md)
- [tool_choiceç²¾ç¡®æŒ‡å®š](./20251026_1916_tool_choiceç²¾ç¡®æŒ‡å®š-ä»recommendedåˆ°functionçº§æ§åˆ¶.md)


